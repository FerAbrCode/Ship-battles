<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fleet Battle — Destroyers + Battleship</title>
  <style>
    :root { color-scheme: dark; }
    html, body { height: 100%; margin: 0; background: #051035; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    #wrap { display: grid; place-items: center; height: 100%; }
    #hud { position: fixed; inset: 0 0 auto 0; padding: 10px 12px; display: flex; gap: 12px; align-items: center; justify-content: space-between; background: rgba(0,0,0,0.38); backdrop-filter: blur(6px); z-index: 10; }
    #hud .left, #hud .right { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
    .pill { padding: 6px 10px; border-radius: 999px; background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.10); font-size: 12px; }
    .pill strong { font-weight: 700; }
    #msg { position: fixed; left: 50%; top: 56px; transform: translateX(-50%); padding: 10px 12px; border-radius: 10px; background: rgba(0,0,0,0.48); border: 1px solid rgba(255,255,255,0.14); font-size: 13px; max-width: min(820px, 94vw); display: none; }
    canvas { border-radius: 12px; border: 1px solid rgba(255,255,255,0.10); }
    a, button { color: inherit; }
    button { cursor: pointer; }
    #btnRow button { padding: 6px 10px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.14); background: rgba(255,255,255,0.08); }
    #btnRow button:hover { background: rgba(255,255,255,0.12); }
    #menu { position: fixed; inset: 0; display: grid; place-items: center; background: rgba(0,0,0,0.55); backdrop-filter: blur(6px); z-index: 20; }
    #menu .card { width: min(760px, 92vw); border-radius: 14px; border: 1px solid rgba(255,255,255,0.12); background: rgba(0,0,0,0.55); padding: 16px; }
    #menu h1 { margin: 0 0 8px 0; font-size: 18px; }
    #menu .row { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; margin: 10px 0; }
    #menu .muted { opacity: 0.82; font-size: 13px; line-height: 1.35; }
    #menu button { padding: 8px 10px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.14); background: rgba(255,255,255,0.08); }
    #menu button:hover { background: rgba(255,255,255,0.12); }
    #menu button.sel { outline: 2px solid rgba(90,255,140,0.35); }
    #menu .spacer { flex: 1; }
  </style>
</head>
<body>
  <div id="hud">
    <div class="left">
      <div class="pill"><strong>Level</strong>: <span id="level">1</span></div>
      <div class="pill"><strong>Selected</strong>: <span id="sel">1</span></div>
      <div class="pill"><strong>Ship</strong>: <span id="stype">DD</span></div>
      <div class="pill"><strong>Smoke</strong>: <span id="smoke">Ready</span></div>
      <div class="pill"><strong>Gun</strong>: <span id="gun">Ready</span></div>
      <div class="pill"><strong>Torpedo</strong>: <span id="missile">Ready</span></div>
      <div class="pill"><strong>HP</strong>: <span id="hp">-</span></div>
      <div class="pill"><strong>Throttle</strong>: <span id="throttle">50%</span></div>
      <div class="pill"><strong>Rudder</strong>: <span id="rudder">0°</span></div>
    </div>
    <div class="right" id="btnRow">
      <button id="restart">Restart (R)</button>
      <button id="next">Next Level</button>
      <div class="pill">Aim: mouse · Move: WASD · Shell: Click · Torpedo: Q · Smoke: E</div>
    </div>
  </div>
  <div id="msg"></div>
  <div id="menu">
    <div class="card">
      <h1>WW2 Fleet Battle</h1>
      <div class="muted">
        Controls: WASD move · Mouse aim · Click shells · Q torpedo · E smoke · F extinguisher · R restart<br>
        Radar-only spotting (shared with allies). Grounding: ships can get stuck on land.
      </div>
      <div class="row">
        <div class="pill"><strong>Difficulty</strong></div>
        <button id="diffEasy">Easy</button>
        <button id="diffMed">Medium</button>
        <button id="diffHard">Hard</button>
      </div>
      <div class="row">
        <div class="pill"><strong>Your ship</strong></div>
        <button id="classDD">Destroyer</button>
        <button id="classBB">Battleship</button>
        <button id="classTB">Torpedo boat</button>
        <button id="classCV">Aircraft carrier</button>
      </div>
      <div class="row">
        <div class="pill"><strong>Map</strong></div>
        <button id="map0">Midway</button>
        <button id="map1">Guadalcanal</button>
        <button id="map2">Leyte Gulf</button>
        <div class="spacer"></div>
        <button id="startBtn">Start</button>
      </div>
    </div>
  </div>
  <div id="wrap">
    <canvas id="c" width="1000" height="650"></canvas>
  </div>
<script type="module">
import { init } from './js/game.js';

const canvas = document.getElementById('c');
const ui = {
  level: document.getElementById('level'),
  sel: document.getElementById('sel'),
  stype: document.getElementById('stype'),
  smoke: document.getElementById('smoke'),
  gun: document.getElementById('gun'),
  missile: document.getElementById('missile'),
  hp: document.getElementById('hp'),
  throttle: document.getElementById('throttle'),
  rudder: document.getElementById('rudder'),
  msg: document.getElementById('msg'),
  restart: document.getElementById('restart'),
  next: document.getElementById('next'),
  menu: document.getElementById('menu'),
  diffEasy: document.getElementById('diffEasy'),
  diffMed: document.getElementById('diffMed'),
  diffHard: document.getElementById('diffHard'),
  classDD: document.getElementById('classDD'),
  classBB: document.getElementById('classBB'),
  classTB: document.getElementById('classTB'),
  classCV: document.getElementById('classCV'),
  map0: document.getElementById('map0'),
  map1: document.getElementById('map1'),
  map2: document.getElementById('map2'),
  startBtn: document.getElementById('startBtn'),
};

init(canvas, ui);
</script>
</body>
</html>
